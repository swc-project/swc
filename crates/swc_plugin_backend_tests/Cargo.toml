[package]
authors     = ["강동윤 <kdy1997.dev@gmail.com>"]
description = "swc plugin backend tests and benchmarks"
edition     = { workspace = true }
license     = { workspace = true }
name        = "swc_plugin_backend_tests"
publish     = false
repository  = { workspace = true }
version     = "0.0.0"

[lib]
bench   = false
doctest = false

[features]
# for ast_node macro
default = ["encoding-impl"]
__rkyv = []
rkyv-impl = []
serde-impl = []
encoding-impl = []

[lints.rust]
unexpected_cfgs = { level = "warn", check-cfg = ['cfg(swc_ast_unknown)'] }

[dev-dependencies]
anyhow = { workspace = true, default-features = false }
codspeed-criterion-compat = { workspace = true }
rustc-hash = { workspace = true, default-features = false }
serde = { workspace = true, features = ["derive"], default-features = false }
serde_json = { workspace = true, default-features = false }
tokio = { workspace = true, features = ["rt"], default-features = false }
tracing = { workspace = true, default-features = false }
cbor4ii                   = { workspace = true, features = [ "use_std" ] }

swc_common = { version = "18.0.1", path = "../swc_common", features = [
  "concurrent",
] }
swc_plugin_runner = { version = "24.0.0", path = "../swc_plugin_runner", features = ["encoding-impl", "plugin_transform_schema_v1"] }
swc_ecma_ast = { version = "20.0.1", path = "../swc_ecma_ast", features = [
  "encoding-impl",
] }
swc_ecma_parser = { version = "33.0.1", path = "../swc_ecma_parser", default-features = false }
swc_ecma_visit = { version = "20.0.0", path = "../swc_ecma_visit", default-features = false }
swc_transform_common = { version = "12.0.0", path = "../swc_transform_common", default-features = false }
swc_malloc = { version = "1.2.4", path = "../swc_malloc", default-features = false }
testing = { version = "19.0.0", path = "../testing", default-features = false }

swc_plugin_backend_wasmer = { version = "7.0", path = "../swc_plugin_backend_wasmer", default-features = false }
swc_plugin_backend_wasmtime = { version = "6.0", path = "../swc_plugin_backend_wasmtime", default-features = false }

[[bench]]
harness = false
name    = "ecma_invoke"

[package.metadata.cargo-shear]
ignored = [
  # false positive, use by ast_node macro
  "cbor4ii",
]
