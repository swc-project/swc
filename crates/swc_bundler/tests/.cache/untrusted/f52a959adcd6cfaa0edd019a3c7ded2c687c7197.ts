// Loaded from https://cdn.esm.sh/v45/@tinyhttp/router@1.3.3/es2015/router.js


/* esm.sh - esbuild bundle(@tinyhttp/router@1.3.3) es2015 production */
var R=Object.defineProperty,O=Object.defineProperties;var A=Object.getOwnPropertyDescriptors;var o=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;var c=(r,e,t)=>e in r?R(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,E=(r,e)=>{for(var t in e||(e={}))N.call(e,t)&&c(r,t,e[t]);if(o)for(var t of o(e))T.call(e,t)&&c(r,t,e[t]);return r},C=(r,e)=>O(r,A(e));var f=["ACL","BIND","CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LINK","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCALENDAR","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PRI","PROPFIND","PROPPATCH","PURGE","PUT","REBIND","REPORT","SEARCH","SOURCE","SUBSCRIBE","TRACE","UNBIND","UNLINK","UNLOCK","UNSUBSCRIBE"],p=({path:r,handler:e,fullPath:t,method:s})=>({method:s,handler:e||r,path:typeof r=="string"?r:"/",fullPath:typeof r=="string"?t:r}),a=r=>({path:e,handler:t,method:s,handlers:d,type:i,fullPaths:l})=>{let u=p({path:e,handler:t,method:s,type:i,fullPath:l==null?void 0:l[0]}),h=[],m=1;d&&(h=d.flat().map(n=>p({path:e,handler:n,method:s,type:i,fullPath:l==null?null:l[m++]})));for(let n of[u,...h])r.push(C(E({},n),{type:i}))},w=class{constructor(){this.middleware=[],this.mountpath="/",this.apps={};for(let e of f)this[e.toLowerCase()]=this.add(e)}add(e){return(...t)=>{let s=t.slice(1).flat();return a(this.middleware)({path:t[0],handler:s[0],handlers:s.slice(1),method:e,type:"route"}),this}}msearch(...e){let t=e.slice(1).flat();return a(this.middleware)({path:e[0],handler:t[0],handlers:t.slice(1),method:"M-SEARCH",type:"route"}),this}all(...e){let t=e.slice(1).flat();return a(this.middleware)({path:e[0],handler:t[0],handlers:t.slice(1),type:"route"}),this}path(){return this.parent?this.parent.path()+this.mountpath:""}use(...e){let t=e[0],s=e.slice(1).flat();return typeof t=="string"?a(this.middleware)({path:t,handler:s[0],handlers:s.slice(1),type:"mw"}):a(this.middleware)({path:"/",handler:Array.isArray(t)?t[0]:t,handlers:Array.isArray(t)?[...t.slice(1),...s]:s,type:"mw"}),this}};export{w as Router,a as pushMiddleware};
